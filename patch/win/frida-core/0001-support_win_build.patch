From 3ea6423f42295fc67a019410a01d2aa6df117f98 Mon Sep 17 00:00:00 2001
From: feicong <fei_cong@gmail.com>
Date: Tue, 9 Feb 2021 04:09:04 +0000
Subject: [PATCH] 'support_win_build'

---
 frida-core.vcxproj | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/frida-core.vcxproj b/frida-core.vcxproj
index 75958a95..dc42d65a 100644
--- a/frida-core.vcxproj
+++ b/frida-core.vcxproj
@@ -198,7 +198,7 @@ REM. &gt; "$(IntDir)data\agent.stamp"
 mkdir "$(IntDir)src" 2&gt;NUL
 "$(ValaCompiler)" src/frida.vala src/debugger.vala src/host-session-service.vala src/agent-container.vala src/system.vala src/windows/windows-host-session.vala src/windows/winjector.vala src/windows/frida-helper-process.vala src/socket/socket-host-session.vala src/fruity/fruity-host-session.vala src/fruity/dtx.vala src/fruity/lockdown.vala src/fruity/installation-proxy.vala src/fruity/lldb.vala src/fruity/injector.vala src/fruity/usbmux.vala src/fruity/keyed-archive.vala src/fruity/plist.vala src/fruity/plist-service.vala src/droidy/droidy-host-session.vala src/droidy/droidy-client.vala -D WINDOWS -D HAVE_GIOSCHANNEL --ccode --directory=$(IntDir) --library=frida-core --header=$(IntDir)frida-core.h --symbols=$(IntDir)frida-core.symbols --vapidir="$(IntDir)..\frida-interfaces-32" --vapidir="$(IntDir)..\frida-interfaces-64" --vapidir="$(IntDir)..\frida-pipe-32" --vapidir="$(IntDir)..\frida-pipe-64" --vapidir="$(IntDir)..\frida-helper-backend-32" --vapidir="$(IntDir)..\frida-helper-backend-64" --vapidir="$(IntDir)data" $(ValaFlags) --pkg config --pkg=gmodule-2.0 --pkg=gio-2.0 --pkg=gioschannel --pkg=gee-0.8 --pkg=json-glib-1.0 --pkg=frida-gum-1.0 --pkg=frida-gumjs-1.0 --pkg=frida-interfaces --pkg=frida-pipe --pkg=frida-helper-backend --pkg=frida-data-windows --pkg=frida-data-agent || exit 1
 mkdir "$(IntDir)api" 2&gt;NUL
-"$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-32\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-32\frida-interfaces.h" "$(IntDir)api"
+py -3 "$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-32\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-32\frida-interfaces.h" "$(IntDir)api"
 echo &gt; "$(IntDir)valacode.stamp"
 </Command>
       <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">$(ValaCompiler);$(ProjectDir)src\debugger.vala;$(ProjectDir)src\host-session-service.vala;$(ProjectDir)src\agent-container.vala;$(ProjectDir)src\system.vala;$(ProjectDir)src\windows\windows-host-session.vala;$(ProjectDir)src\windows\winjector.vala;$(ProjectDir)src\windows\frida-helper-process.vala;$(ProjectDir)src\socket\socket-host-session.vala;$(ProjectDir)src\fruity\fruity-host-session.vala;$(ProjectDir)src\fruity\dtx.vala;$(ProjectDir)src\fruity\lockdown.vala;$(ProjectDir)src\fruity\installation-proxy.vala;$(ProjectDir)src\fruity\lldb.vala;$(ProjectDir)src\fruity\injector.vala;$(ProjectDir)src\fruity\usbmux.vala;$(ProjectDir)src\fruity\keyed-archive.vala;$(ProjectDir)src\fruity\plist.vala;$(ProjectDir)src\fruity\plist-service.vala;$(ProjectDir)src\droidy\droidy-host-session.vala;$(ProjectDir)src\droidy\droidy-client.vala;%(AdditionalInputs)</AdditionalInputs>
@@ -208,7 +208,7 @@ echo &gt; "$(IntDir)valacode.stamp"
 mkdir "$(IntDir)src" 2&gt;NUL
 "$(ValaCompiler)" src/frida.vala src/debugger.vala src/host-session-service.vala src/agent-container.vala src/system.vala src/windows/windows-host-session.vala src/windows/winjector.vala src/windows/frida-helper-process.vala src/socket/socket-host-session.vala src/fruity/fruity-host-session.vala src/fruity/dtx.vala src/fruity/lockdown.vala src/fruity/installation-proxy.vala src/fruity/lldb.vala src/fruity/injector.vala src/fruity/usbmux.vala src/fruity/keyed-archive.vala src/fruity/plist.vala src/fruity/plist-service.vala src/droidy/droidy-host-session.vala src/droidy/droidy-client.vala -D WINDOWS -D HAVE_GIOSCHANNEL --ccode --directory=$(IntDir) --library=frida-core --header=$(IntDir)frida-core.h --symbols=$(IntDir)frida-core.symbols --vapidir="$(IntDir)..\frida-interfaces-32" --vapidir="$(IntDir)..\frida-interfaces-64" --vapidir="$(IntDir)..\frida-pipe-32" --vapidir="$(IntDir)..\frida-pipe-64" --vapidir="$(IntDir)..\frida-helper-backend-32" --vapidir="$(IntDir)..\frida-helper-backend-64" --vapidir="$(IntDir)data" $(ValaFlags) --pkg config --pkg=gmodule-2.0 --pkg=gio-2.0 --pkg=gioschannel --pkg=gee-0.8 --pkg=json-glib-1.0 --pkg=frida-gum-1.0 --pkg=frida-gumjs-1.0 --pkg=frida-interfaces --pkg=frida-pipe --pkg=frida-helper-backend --pkg=frida-data-windows --pkg=frida-data-agent || exit 1
 mkdir "$(IntDir)api" 2&gt;NUL
-"$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-64\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-64\frida-interfaces.h" "$(IntDir)api"
+py -3 "$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-64\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-64\frida-interfaces.h" "$(IntDir)api"
 echo &gt; "$(IntDir)valacode.stamp"
 </Command>
       <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">$(ValaCompiler);$(ProjectDir)src\debugger.vala;$(ProjectDir)src\host-session-service.vala;$(ProjectDir)src\agent-container.vala;$(ProjectDir)src\system.vala;$(ProjectDir)src\windows\windows-host-session.vala;$(ProjectDir)src\windows\winjector.vala;$(ProjectDir)src\windows\frida-helper-process.vala;$(ProjectDir)src\socket\socket-host-session.vala;$(ProjectDir)src\fruity\fruity-host-session.vala;$(ProjectDir)src\fruity\dtx.vala;$(ProjectDir)src\fruity\lockdown.vala;$(ProjectDir)src\fruity\installation-proxy.vala;$(ProjectDir)src\fruity\lldb.vala;$(ProjectDir)src\fruity\injector.vala;$(ProjectDir)src\fruity\usbmux.vala;$(ProjectDir)src\fruity\keyed-archive.vala;$(ProjectDir)src\fruity\plist.vala;$(ProjectDir)src\fruity\plist-service.vala;$(ProjectDir)src\droidy\droidy-host-session.vala;$(ProjectDir)src\droidy\droidy-client.vala;%(AdditionalInputs)</AdditionalInputs>
@@ -218,7 +218,7 @@ echo &gt; "$(IntDir)valacode.stamp"
 mkdir "$(IntDir)src" 2&gt;NUL
 "$(ValaCompiler)" src/frida.vala src/debugger.vala src/host-session-service.vala src/agent-container.vala src/system.vala src/windows/windows-host-session.vala src/windows/winjector.vala src/windows/frida-helper-process.vala src/socket/socket-host-session.vala src/fruity/fruity-host-session.vala src/fruity/dtx.vala src/fruity/lockdown.vala src/fruity/installation-proxy.vala src/fruity/lldb.vala src/fruity/injector.vala src/fruity/usbmux.vala src/fruity/keyed-archive.vala src/fruity/plist.vala src/fruity/plist-service.vala src/droidy/droidy-host-session.vala src/droidy/droidy-client.vala -D WINDOWS -D HAVE_GIOSCHANNEL --ccode --directory=$(IntDir) --library=frida-core --header=$(IntDir)frida-core.h --symbols=$(IntDir)frida-core.symbols --vapidir="$(IntDir)..\frida-interfaces-32" --vapidir="$(IntDir)..\frida-interfaces-64" --vapidir="$(IntDir)..\frida-pipe-32" --vapidir="$(IntDir)..\frida-pipe-64" --vapidir="$(IntDir)..\frida-helper-backend-32" --vapidir="$(IntDir)..\frida-helper-backend-64" --vapidir="$(IntDir)data" $(ValaFlags) --pkg config --pkg=gmodule-2.0 --pkg=gio-2.0 --pkg=gioschannel --pkg=gee-0.8 --pkg=json-glib-1.0 --pkg=frida-gum-1.0 --pkg=frida-gumjs-1.0 --pkg=frida-interfaces --pkg=frida-pipe --pkg=frida-helper-backend --pkg=frida-data-windows --pkg=frida-data-agent || exit 1
 mkdir "$(IntDir)api" 2&gt;NUL
-"$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-32\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-32\frida-interfaces.h" "$(IntDir)api"
+py -3 "$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-32\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-32\frida-interfaces.h" "$(IntDir)api"
 echo &gt; "$(IntDir)valacode.stamp"
 </Command>
       <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">$(ValaCompiler);$(ProjectDir)src\debugger.vala;$(ProjectDir)src\host-session-service.vala;$(ProjectDir)src\agent-container.vala;$(ProjectDir)src\system.vala;$(ProjectDir)src\windows\windows-host-session.vala;$(ProjectDir)src\windows\winjector.vala;$(ProjectDir)src\windows\frida-helper-process.vala;$(ProjectDir)src\socket\socket-host-session.vala;$(ProjectDir)src\fruity\fruity-host-session.vala;$(ProjectDir)src\fruity\dtx.vala;$(ProjectDir)src\fruity\lockdown.vala;$(ProjectDir)src\fruity\installation-proxy.vala;$(ProjectDir)src\fruity\lldb.vala;$(ProjectDir)src\fruity\injector.vala;$(ProjectDir)src\fruity\usbmux.vala;$(ProjectDir)src\fruity\keyed-archive.vala;$(ProjectDir)src\fruity\plist.vala;$(ProjectDir)src\fruity\plist-service.vala;$(ProjectDir)src\droidy\droidy-host-session.vala;$(ProjectDir)src\droidy\droidy-client.vala;%(AdditionalInputs)</AdditionalInputs>
@@ -228,7 +228,7 @@ echo &gt; "$(IntDir)valacode.stamp"
 mkdir "$(IntDir)src" 2&gt;NUL
 "$(ValaCompiler)" src/frida.vala src/debugger.vala src/host-session-service.vala src/agent-container.vala src/system.vala src/windows/windows-host-session.vala src/windows/winjector.vala src/windows/frida-helper-process.vala src/socket/socket-host-session.vala src/fruity/fruity-host-session.vala src/fruity/dtx.vala src/fruity/lockdown.vala src/fruity/installation-proxy.vala src/fruity/lldb.vala src/fruity/injector.vala src/fruity/usbmux.vala src/fruity/keyed-archive.vala src/fruity/plist.vala src/fruity/plist-service.vala src/droidy/droidy-host-session.vala src/droidy/droidy-client.vala -D WINDOWS -D HAVE_GIOSCHANNEL --ccode --directory=$(IntDir) --library=frida-core --header=$(IntDir)frida-core.h --symbols=$(IntDir)frida-core.symbols --vapidir="$(IntDir)..\frida-interfaces-32" --vapidir="$(IntDir)..\frida-interfaces-64" --vapidir="$(IntDir)..\frida-pipe-32" --vapidir="$(IntDir)..\frida-pipe-64" --vapidir="$(IntDir)..\frida-helper-backend-32" --vapidir="$(IntDir)..\frida-helper-backend-64" --vapidir="$(IntDir)data" $(ValaFlags) --pkg config --pkg=gmodule-2.0 --pkg=gio-2.0 --pkg=gioschannel --pkg=gee-0.8 --pkg=json-glib-1.0 --pkg=frida-gum-1.0 --pkg=frida-gumjs-1.0 --pkg=frida-interfaces --pkg=frida-pipe --pkg=frida-helper-backend --pkg=frida-data-windows --pkg=frida-data-agent || exit 1
 mkdir "$(IntDir)api" 2&gt;NUL
-"$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-64\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-64\frida-interfaces.h" "$(IntDir)api"
+py -3 "$(ProjectDir)src\api\generate.py" 1.0 "$(ProjectDir)src\frida.vala" "$(IntDir)frida-core.vapi" "$(IntDir)frida-core.h" "$(IntDir)..\frida-interfaces-64\frida-interfaces.vapi" "$(IntDir)..\frida-interfaces-64\frida-interfaces.h" "$(IntDir)api"
 echo &gt; "$(IntDir)valacode.stamp"
 </Command>
       <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Release|x64'">$(ValaCompiler);$(ProjectDir)src\debugger.vala;$(ProjectDir)src\host-session-service.vala;$(ProjectDir)src\agent-container.vala;$(ProjectDir)src\system.vala;$(ProjectDir)src\windows\windows-host-session.vala;$(ProjectDir)src\windows\winjector.vala;$(ProjectDir)src\windows\frida-helper-process.vala;$(ProjectDir)src\socket\socket-host-session.vala;$(ProjectDir)src\fruity\fruity-host-session.vala;$(ProjectDir)src\fruity\dtx.vala;$(ProjectDir)src\fruity\lockdown.vala;$(ProjectDir)src\fruity\installation-proxy.vala;$(ProjectDir)src\fruity\lldb.vala;$(ProjectDir)src\fruity\injector.vala;$(ProjectDir)src\fruity\usbmux.vala;$(ProjectDir)src\fruity\keyed-archive.vala;$(ProjectDir)src\fruity\plist.vala;$(ProjectDir)src\fruity\plist-service.vala;$(ProjectDir)src\droidy\droidy-host-session.vala;$(ProjectDir)src\droidy\droidy-client.vala;%(AdditionalInputs)</AdditionalInputs>
-- 
2.30.0.windows.2

